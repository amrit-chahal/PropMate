(()=>{"use strict";var e,t={6699:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,":root {\r\n  --main-bg-color: rgb(232, 234, 246);\r\n  --edit-icon: rgb(216, 67, 21);\r\n  --add-icon: rgb(1, 87, 155);\r\n  --bottom-menu: rgb(197, 202, 233);\r\n  --top-menu: rgb(235, 138, 101);\r\n}\r\nbody {\r\n  padding: 0;\r\n  margin: 0 !important;\r\n  background-color: var(--main-bg-color);\r\n  width: 280px;\r\n  height: 380px;\r\n}\r\nsup {\r\n  font-size: xx-small;\r\n}\r\n\r\n.propMate-location-cards {\r\n  max-height: 266px;\r\n  margin-top: 10px;\r\n  overflow-y: scroll;\r\n}\r\n.propMate-location-cards::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n.propMate-location-cards::-webkit-scrollbar-track {\r\n  background: rgba(0, 0, 0, 0.1);\r\n}\r\n.propMate-location-cards::-webkit-scrollbar-thumb {\r\n  border-radius: 10px;\r\n  background: rgba(0, 0, 0, 0.2);\r\n}\r\n.propMate-location-cards::-webkit-scrollbar-thumb:hover {\r\n  background: rgba(0, 0, 0, 0.4);\r\n}\r\n.propMate-location-cards::-webkit-scrollbar-thumb:active {\r\n  background: rgba(0, 0, 0, 0.9);\r\n}\r\n",""]);const o=r},4379:(e,t,n)=>{var a=n(7294),r=n(3935),o=n(3379),i=n.n(o),l=n(7795),c=n.n(l),s=n(569),d=n.n(s),m=n(3565),u=n.n(m),p=n(9216),E=n.n(p),b=n(4589),g=n.n(b),v=n(6699),h={};h.styleTagTransform=g(),h.setAttributes=u(),h.insert=d().bind(null,"head"),h.domAPI=c(),h.insertStyleElement=E(),i()(v.Z,h),v.Z&&v.Z.locals&&v.Z.locals;var f=n(8889),y=n(8463),Z=n(9912),x=n(1749),w=n(2318),k=n(1907),O=n(7812),A=n(8623),N=n(6083),P=n(6856),j=n(282),T=n(275),C=n(387),L=n(6945);const D=({userLocation:e,locationTitle:t,onEdit:n,onDelete:r})=>{const[o,i]=a.useState(!1),l=()=>{i(!1)};return a.createElement(f.Z,{mx:"6px",my:"6px"},a.createElement(y.Z,null,a.createElement(Z.Z,{style:{padding:0}},a.createElement(x.Z,{container:!0,direction:"row",justifyContent:"center",alignItems:"center"},a.createElement(x.Z,{item:!0,xs:2,style:{textAlign:"center"}},a.createElement(T.Z,{style:{color:"#55c1db"}})),a.createElement(x.Z,{item:!0,xs:6},a.createElement(w.Z,{variant:"subtitle2",style:{fontWeight:"bold"}},t,":"),a.createElement(w.Z,{variant:"caption"},e)),a.createElement(x.Z,{item:!0,xs:2},a.createElement(k.Z,{style:{padding:"0"},onClick:n},a.createElement(O.Z,null,a.createElement(C.Z,{color:"primary"})))),a.createElement(x.Z,{item:!0,xs:2},a.createElement(k.Z,{style:{padding:"0"},onClick:()=>{i(!0)}},a.createElement(O.Z,null,a.createElement(L.Z,{color:"secondary"})))))),a.createElement(A.Z,{open:o,onClose:l,"aria-labelledby":"draggable-dialog-title"},a.createElement(N.Z,{id:"draggable-dialog-title"},"Are you sure?"),a.createElement(P.Z,null,a.createElement(j.Z,{autoFocus:!0,onClick:e=>(e=>{r(e),i(!1)})(e),color:"primary"},"Yes"),a.createElement(j.Z,{onClick:l,color:"secondary"},"No")))))};var F=n(5258),S=n(8358),I=n(2863),M=n(3369),z=n(6562),R=n(553),U=n(7395),V=n(5881),_=n(8665),H=n(588),B=n(3829);function G(e){const t={userLocations:e};return new Promise((e=>{chrome.storage.sync.set(t,(()=>{e()}))}))}var W=n(9895),$=n(9196),q=n(4588),K=n(8965);var Q=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function l(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((a=a.apply(e,t||[])).next())}))};function Y(e,t,n,a){return Q(this,void 0,void 0,(function*(){const{hasError:r,error:o,value:i}=yield J(e,t);let l,c=!0;for(l in a){const t=a[l];if(l===e&&r){c=!1;break}if(l!==e&&t.hasError){c=!1;break}}n({type:te.ADD,data:{name:e,value:i,hasError:r,error:o,touched:!0,isFormValid:c}})}))}function J(e,t){return Q(this,void 0,void 0,(function*(){let n=!1,a="",r=t;switch(e){case"title":""===r.trim()?(n=!0,a="Title cannot be empty"):r.length>16?(n=!0,a="Title cannot be longer than 16 characters"):/^[\w\d\s]*$/.test(r.trim())?(n=!1,a="",r=X(r)):(n=!0,a="Only letters and numbers allowed");break;case"location":if(""===r.trim())n=!0,a="Address cannot be empty";else if(r.length>60)n=!0,a="Address too long! Please enter a shorter address";else if(/^(\d{0,10}\s)?(((\d{0,10}[a-zA-Z]{0,3})|(\d{0,10}(\/|\\)(([a-zA-Z]{0,3})|(\d{1,5}))))\s)?([a-zA-Z]{1,30},?\s?)*(\s?[a-zA-Z]{1,30})$/.test(r.trim())){const{isValidAddress:e,addressFromResponse:t}=yield function(e){return t=this,n=void 0,r=function*(){let t=!1,n=e;try{const a=yield fetch(`https://maps.googleapis.com/maps/api/distancematrix/json?units=metric&origins=\n      ${e}&destinations=auckland%20newzealand&key=AIzaSyAdOskc_QLpLZ9xrV-mv1Er3Da1jDtFuqI`);if(a.ok){const e=yield a.json();"OK"===e.rows[0].elements[0].status&&(t=!0,n=e.origin_addresses[0])}return{isValidAddress:t,addressFromResponse:n}}catch(e){return{isValidAddress:t,addressFromResponse:n}}},new((a=void 0)||(a=Promise))((function(e,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(i,l)}c((r=r.apply(t,n||[])).next())}));var t,n,a,r}(r.trim());e?(n=!1,a="",r=t):(n=!0,a="Cannot find address please enter valid address")}else n=!0,a="Pleaes enter valid address"}return{hasError:n,error:a,value:r}}))}const X=e=>{if(!e)return"";var t=e.trim().split(" ");const n=[];return t.map((e=>{n.push(e[0].toUpperCase()+e.substring(1).toLowerCase())})),n.join(" ")};var ee=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function l(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((a=a.apply(e,t||[])).next())}))};const te={EDIT:"edit",ADD:"add",INPUT_CHANGE:"input change",RESET_FORM:"resetForm"},ne={title:{value:"",touched:!1,hasError:!1,error:""},location:{value:"",touched:!1,hasError:!1,error:""},isFormValid:!0},ae=(e,t)=>{switch(t.type){case te.ADD:{const{name:n,value:a,hasError:r,error:o,touched:i,isFormValid:l}=t.data;return Object.assign(Object.assign({},e),{[n]:Object.assign(Object.assign({},e[n]),{value:a,hasError:r,error:o,touched:i}),isFormValid:l})}case te.EDIT:{const{name:n,value:a}=t.data;return Object.assign(Object.assign({},e),{[n]:Object.assign(Object.assign({},e[n]),{value:a})})}case te.INPUT_CHANGE:{const{name:n,value:a}=t.data;return Object.assign(Object.assign({},e),{[n]:Object.assign(Object.assign({},e[n]),{value:a})})}case te.RESET_FORM:return ne;default:return e}},re=({title:e,location:t,addUserLocation:n,updateUserLocation:r,isListFull:o})=>{const[i,l]=(0,a.useReducer)(ae,ne),[c,s]=(0,a.useState)(!1),[d,m]=(0,a.useState)("Add new place"),[u,p]=(0,a.useState)("Add"),[E,b]=(0,a.useState)("Success: New place added"),[g,v]=(0,a.useState)(!1),h=(0,a.useRef)(!0);(0,a.useEffect)((()=>(e&&t&&(l({type:te.EDIT,data:{name:"title",value:e}}),l({type:te.EDIT,data:{name:"location",value:t}}),m("Update place"),p("Update"),b("Sucess: Place updated")),()=>{h.current=!1})),[]),(0,a.useEffect)((()=>{g&&("Add"===u&&n&&(n(i.title.value,i.location.value),l({type:te.RESET_FORM})),"Update"===u&&r&&r(i.title.value,i.location.value))}),[g]);const y=e=>ee(void 0,void 0,void 0,(function*(){e.preventDefault();let t,n=!0;for(t in s(!0),i){const e=i[t],{value:a}=e,r=yield J(t,a);r.hasError&&(n=!1),t&&l({type:te.ADD,data:{name:t,value:r.value,hasError:r.hasError,error:r.error,touched:!0,isFormValid:n}})}n&&v(!0),s(!1),h.current&&setTimeout((()=>{v(!1)}),3e3)}));return a.createElement(f.Z,{margin:"8px"},a.createElement(W.Z,{elevation:3},a.createElement(f.Z,{px:"8px",py:"4px"},a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>ee(void 0,void 0,void 0,(function*(){yield y(e)}))},a.createElement(x.Z,{container:!0,direction:"column",justifyContent:"center",alignItems:"center"},a.createElement(x.Z,{item:!0},a.createElement(f.Z,{margin:"5px"},a.createElement(w.Z,{style:{fontWeight:"bold"},variant:"subtitle2",color:"primary"},d))),a.createElement(x.Z,{item:!0},a.createElement(f.Z,{margin:"5px"},a.createElement($.Z,{error:i.title.hasError,disabled:o,size:"small",autoFocus:!0,name:"title",label:"Title",variant:"outlined",color:"primary",value:i.title.value,onChange:e=>l({type:te.INPUT_CHANGE,data:{name:"title",value:e.target.value}}),onBlur:e=>ee(void 0,void 0,void 0,(function*(){yield Y("title",e.target.value,l,i)}))}))),a.createElement(x.Z,{item:!0},a.createElement(f.Z,{height:"10px",marginBottom:"5px"},i.title.touched&&i.title.hasError&&a.createElement(w.Z,{variant:"caption",color:"secondary"},a.createElement("span",{className:"propMate-submit-message"},i.title.error)))),a.createElement(x.Z,{item:!0},a.createElement(f.Z,{margin:"5px"},a.createElement($.Z,{size:"small",disabled:o,error:i.location.hasError,name:"location",label:"Address",variant:"outlined",color:"primary",value:i.location.value,onChange:e=>l({type:te.INPUT_CHANGE,data:{name:"location",value:e.target.value}}),onBlur:e=>ee(void 0,void 0,void 0,(function*(){yield Y("location",e.target.value,l,i)}))}))),a.createElement(x.Z,{item:!0},a.createElement(f.Z,{height:"35px",marginBottom:"5px",textAlign:"center"},i.location.touched&&i.location.hasError&&a.createElement(w.Z,{variant:"caption",color:"secondary"},a.createElement("span",null,i.location.error)),i.isFormValid&&g&&a.createElement(w.Z,{variant:"caption",style:{color:"green"}},E),o&&!g&&a.createElement(w.Z,{variant:"caption",color:"secondary"},a.createElement("span",null,"Max capacity of 5 addresses reached please delete older items to add new")))),a.createElement(x.Z,{item:!0},a.createElement(f.Z,{margin:"5px"},a.createElement(j.Z,{disabled:c||o,type:"submit",variant:"contained",color:"primary",size:"small",startIcon:"Update"===u?a.createElement(K.Z,null):a.createElement(B.Z,null),onClick:y},u),c&&a.createElement(q.Z,{size:20,style:{position:"absolute",zIndex:1,top:"260px",left:"130px"}}))))))))},oe="offstate",ie="editstate",le="switchtabs",ce={extensionEnabled:!0,bottomNavigation:"myPlaces",functionalError:!1},se=(e,t)=>{switch(t.type){case oe:return Object.assign(Object.assign({},e),{bottomNavigation:t.data.bottomNavigation,extensionEnabled:t.data.extensionEnabled});case ie:case le:return Object.assign(Object.assign({},e),{bottomNavigation:t.data.bottomNavigation});default:return e}},de=document.createElement("div");document.body.appendChild(de),r.render(a.createElement((()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useReducer)(se,ce),[o,i]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),[s,d]=(0,a.useState)(),[m,u]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{(function(){const e=["isExtensionEnabled"];return new Promise((t=>{chrome.storage.sync.get(e,(e=>{var n;t(null===(n=e.isExtensionEnabled)||void 0===n||n)}))}))})().then((e=>{r({type:oe,data:{extensionEnabled:e,bottomNavigation:e?"myPlaces":"extensionDisabled"}}),function(){const e=["userLocations"];return new Promise((t=>{chrome.storage.sync.get(e,(e=>{var n;t(null!==(n=e.userLocations)&&void 0!==n?n:[])}))}))}().then((e=>{t(e),e.length>=4&&u(!0)}))}))}),[]),a.createElement("div",{className:"propMate-container"},a.createElement(F.Z,{position:"static",color:n.extensionEnabled?"primary":"transparent"},a.createElement(S.Z,null,a.createElement(x.Z,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center"},a.createElement(x.Z,{item:!0,xs:1},a.createElement(I.Z,null,a.createElement("img",{height:"24px",className:"proMate-icon",src:"icon.png"}))),a.createElement(x.Z,{item:!0,xs:1},a.createElement(M.ZP,{title:"Help and feedback"},a.createElement(O.Z,{color:"inherit",onClick:()=>{chrome.tabs.create({active:!0,url:"mailto:xdev.f12@gmail.com"})}},a.createElement(H.Z,null)))),a.createElement(x.Z,{item:!0,xs:1}),a.createElement(x.Z,{item:!0,xs:6},a.createElement(w.Z,{align:"center",variant:"body1",noWrap:!0},"Propmate",a.createElement("sup",null,"beta"))),a.createElement(x.Z,{item:!0,xs:3},a.createElement(z.Z,null,a.createElement(R.Z,{style:{margin:0},control:a.createElement(U.Z,{size:"small",checked:n.extensionEnabled,"aria-label":"turn on or off",onChange:e=>{r({type:oe,data:{bottomNavigation:e.target.checked?"myPlaces":"extensionDisabled",extensionEnabled:e.target.checked}}),function(e){const t={isExtensionEnabled:e};new Promise((e=>{chrome.storage.sync.set(t,(()=>{e()}))}))}(e.target.checked),chrome.runtime.sendMessage({isEnabled:e.target.checked}),e.target.checked?chrome.action.setIcon({path:"icon.png"}):chrome.action.setIcon({path:"icon-disabled.png"})}}),label:n.extensionEnabled?"On":"Off"})))))),a.createElement("div",{className:"propMate-inner"},"editPlace"===n.bottomNavigation&&a.createElement(re,{title:l,location:o,updateUserLocation:(n,a)=>{const r=[...e];r[s]={locationTitle:n,userLocation:a},t((e=>[...r])),G(r)}}),"addNewPlace"===n.bottomNavigation&&a.createElement(re,{addUserLocation:(n,a)=>{t((e=>[...e,{locationTitle:n,userLocation:a}])),e.length>=4&&u(!0),G([...e,{locationTitle:n,userLocation:a}])},isListFull:m}),"myPlaces"===n.bottomNavigation&&a.createElement("div",{className:"propMate-location-cards"},e.length>0&&e.map(((n,o)=>a.createElement(D,{userLocation:n.userLocation,locationTitle:n.locationTitle,key:o,onDelete:()=>(n=>{e.splice(n,1),t((e=>[...e])),G(e),u(!1)})(o),onEdit:()=>(t=>{d(t),c(e[t].locationTitle),i(e[t].userLocation),r({type:ie,data:{bottomNavigation:"editPlace"}})})(o)}))),e.length<=0&&a.createElement(y.Z,{style:{margin:"70px 40px"}},a.createElement(Z.Z,{style:{textAlign:"center"}},a.createElement(w.Z,{variant:"body2"},"Looks like its empty here! Click 'Add new place' to add a new address.")))),"extensionDisabled"===n.bottomNavigation&&a.createElement("div",null,a.createElement(y.Z,{style:{margin:"70px 40px"}},a.createElement(Z.Z,{style:{textAlign:"center"}},a.createElement(w.Z,{variant:"body2",style:{color:"grey"}},"Propmate is currently turned off, Please click the enable button on top right corner in order to turn it on."))))),a.createElement(f.Z,{width:"100%",position:"fixed",bottom:"0",borderTop:"1px solid rgba(0, 0, 0, 0.1)"},a.createElement(V.Z,{showLabels:!0,value:n.bottomNavigation,onChange:(e,t)=>{r({type:le,data:{bottomNavigation:t}})}},a.createElement(_.Z,{label:"My places",value:"myPlaces",disabled:!n.extensionEnabled,icon:a.createElement(T.Z,null),style:{borderRight:"1px solid rgba(0, 0, 0, 0.1)"}}),a.createElement(_.Z,{disabled:!n.extensionEnabled,label:"Add new place",value:"addNewPlace",icon:a.createElement(B.Z,null)}))))}),null),de)}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={id:e,exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,n,r,o)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,r,o]=e[d],l=!0,c=0;c<n.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(l=!1,o<i&&(i=o));if(l){e.splice(d--,1);var s=r();void 0!==s&&(t=s)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,r,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={42:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[i,l,c]=n,s=0;if(i.some((t=>0!==e[t]))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(c)var d=c(a)}for(t&&t(n);s<i.length;s++)o=i[s],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},n=self.webpackChunkpropmate=self.webpackChunkpropmate||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var r=a.O(void 0,[28,320],(()=>a(4379)));r=a.O(r)})();